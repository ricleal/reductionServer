digraph handler {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_MainMap {

        label="MainMap";

        //
        // States (Nodes)
        //

        "MainMap::Idle"
            [label="{Idle|Entry/\l&nbsp;&nbsp;&nbsp;setStatus;\l}"];

        "MainMap::ProcessingFile"
            [label="{ProcessingFile|Entry/\l&nbsp;&nbsp;&nbsp;checkFileProcessing;\l}"];

        "MainMap::Waiting"
            [label="{Waiting|Entry/\l&nbsp;&nbsp;&nbsp;setStatus;\l}"];

        "MainMap::ProcessingQuery"
            [label="{ProcessingQuery|Entry/\l&nbsp;&nbsp;&nbsp;setStatus;\l}"];

        "%start"
            [label="" shape=circle style=filled fillcolor=black width=0.25];

        //
        // Transitions (Edges)
        //

        "MainMap::Idle" -> "MainMap::ProcessingFile"
            [label="receiveFile/\lprocessFile;\lsetStatus;\l"];

        "MainMap::ProcessingFile" -> "MainMap::Waiting"
            [label="success/\lsetSuccessStatus;\l"];

        "MainMap::ProcessingFile" -> "MainMap::Idle"
            [label="failure/\lsetErrorStatus;\l"];

        "MainMap::Waiting" -> "MainMap::ProcessingQuery"
            [label="query/\lhandleQuery;\l"];

        "MainMap::Waiting" -> "MainMap::Idle"
            [label="reset/\lcleanUp;\l"];

        "MainMap::ProcessingQuery" -> "MainMap::Waiting"
            [label="success/\lsetSuccessStatus;\l"];

        "MainMap::ProcessingQuery" -> "MainMap::Waiting"
            [label="failure/\lsetErrorStatus;\l"];

        "%start" -> "MainMap::Idle"
    }

}
